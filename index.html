<!doctype html>

<html>


<head>

<title>TFFHD</title>

</head>


<body>
<h1> Too Fast Family HD: The Weeb App</h1>
	<main>

		<section id="characters">
		<ul id="characters-list">	</ul>
		</section>

		<section id="items">
		<ul id="items-list">	</ul>
		</section>





	</main>
<script>

/*fetch("/characters").then(function(response){
	return response.json();
}).then(function(data)
	{console.log(data);
});
*/


function createCharacterList(charas){
let characterList = "";
for(let i=0; i<charas.length; i++){


let character_ref = '<li><a href="/characters/'+ charas[i]._id +'">' +charas[i].name+'</a>';

let remove_char = '  <a href="/removeChara/'+ charas[i]._id +'"> X </a> </li>';
characterList += character_ref +remove_char;
}
document.getElementById("characters-list").innerHTML = characterList;

};


function createItemsList(items){
let itemList = "";
for(let i=0; i<items.length; i++){


let item_ref = '<li><a href="/items/'+ items[i]._id +'">' + items[i].item+'</a>';

let remove_item = '  <a href="/removeItem/'+ items[i]._id +'"> X </a> </li>';
itemList += item_ref + remove_item;
}

document.getElementById("items-list").innerHTML = itemList;

};


let chara_intro_interval = setTimeout(function(){
fetch("/characters")
	.then(response =>response.json())
	.then(function(data){
	createCharacterList(data);
	character_interval();
	})
	}, 0);

let items_intro_interval = setTimeout(function(){
fetch("/items")
	.then(response => response.json())
	.then(function(data){
	createItemsList(data);
	item_interval();
	})
	}, 0);

function character_interval(){  setInterval(function(){
fetch("/characters")
	.then(response =>response.json())
	.then(function(data){
	createCharacterList(data);
	})
	}, 2000);
}

function item_interval(){ setInterval(function(){
fetch("/items")
	.then(response =>response.json())
	.then(function(data){
	createItemsList(data);
	})
	},2000);
}	
</script>

</body>

</html>
